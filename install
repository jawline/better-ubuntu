#!/usr/bin/env bash

CDIR="$(pwd)"
TDIR="$(mktemp -d)"

cd "${TDIR}"

git clone https://github.com/jawline/devenv.git res
cd res

USBS="$(lsusb)"

if [[ "${USBS}" =~ ".*Dell Computer Corp.*" ]]; then
	./fix_9370
fi

if [ -x "$(command -v apt)" ]; then
	./install_apt
else
	echo "--NO APT. INSTALL DEPS MANUALLY--"
fi

echo "--DONE WITH APT--"

./install_node
./install_rust
./setup_zsh

cp -fr .vimrc ~/
cp -fr .vim/ ~/
cp -fr .tmux.conf ~/

cd "${CDIR}"
rm -rf "${TDIR}"

echo "Reboot for shell changes"
